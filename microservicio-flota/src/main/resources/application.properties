# ===================================================================
# CONFIGURACIÓN DE POSTGRESQL
# ===================================================================

# La URL de conexión JDBC. Cambia 'mi_base_de_datos' por el nombre de tu base de datos.
# Si tu PostgreSQL no corre en el puerto 5432, cámbialo también.
spring.datasource.url=jdbc:postgresql://localhost:5432/mi_base_de_datos

# El usuario de tu base de datos (por defecto suele ser 'postgres')
spring.datasource.username=mi_usuario

# La contraseña de tu base de datos
spring.datasource.password=tpi123

# El driver de PostgreSQL (Spring Boot suele detectarlo, pero es bueno ser explícito)
spring.datasource.driver-class-name=org.postgresql.Driver

# ===================================================================
# CONFIGURACIÓN DE JPA / HIBERNATE (El "traductor" de Java a SQL)
# ===================================================================

# El "dialecto" que le dice a Hibernate cómo "hablar" en el SQL específico de PostgreSQL
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Esta es la propiedad MÁS IMPORTANTE para el desarrollo:
# "ddl-auto" significa "Data Definition Language - automatic".
# 
# Opciones:
#   'none': No hace nada. (Usar en producción)
#   'validate': Valida que las tablas coincidan con tus @Entities, pero no las cambia.
#   'update': ¡RECOMENDADO PARA DESARROLLO! Modifica las tablas si cambias tus @Entities (ej. agrega una columna).
#   'create': Borra TODO y crea las tablas desde cero CADA VEZ que arrancas.
#   'create-drop': Igual que 'create', pero borra todo al apagar.
#
spring.jpa.hibernate.ddl-auto=update

# Opcional: Muestra en la consola el SQL que Hibernate está ejecutando por detrás.
# Es MUY útil para depurar.
spring.jpa.show-sql=true
# ===================================================================
# PUERTO DEL SERVICIO
# ===================================================================
# Movemos este servicio al 8084 para dejar el 8080 libre para el API Gateway
server.port=8084
# ===================================================================
# CONFIGURACIÓN DE KEYCLOAK (Spring Security)
# ===================================================================
# Esta es la URL donde Spring Boot irá a buscar la configuración
# y las claves públicas para validar los tokens JWT.
# 'tpi-backend' es el nombre de tu Realm.
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8081/realms/tpi-backend
